#!/usr/bin/env sh

# ğŸ¶âœ¨ Husky x Biome: Code Check Jamâ„¢ ğŸ§ğŸ§ª

echo ""
echo "ğŸ›ï¸ [husky] Booting beats, no bugs allowed..."
echo "ğŸ” [sys] Peeking under the OS cloud..."

IS_LINUX=false

case "$(uname -s)" in
  Linux*)     IS_LINUX=true ;;
  *)          IS_LINUX=false ;;
esac

if [ "$IS_LINUX" = true ]; then
  RUN="sudo pnpm"
  echo "ğŸ§ [env] Linux power â€” root on the hour â±ï¸"
else
  RUN="pnpm"
  echo "ğŸ [env] Mac or Windows â€” smooth like wind flows ğŸ’¨"
fi

echo ""
echo "ğŸ§ [track] Entering client directory to drop some lines..."
cd client || exit 1

echo "ğŸ§ª [lint] Spinning up biome to check for crimes..."
$RUN biome lint --write ./src || exit 1
echo "âœ… [clean] Syntax is crisp â€” no broken rhymes ğŸ› ï¸"

echo ""
echo "ğŸ¨ [style] Giving files a formatting spell..."
$RUN biome format --write ./src || exit 1
echo "âœ¨ [fresh] Code is sharp â€” looking fly as well ğŸ§¥"

echo ""
echo "ğŸš€ [husky] Mic drop: pre-commit track is tight."
echo "ğŸ¤ [done] Push with pride â€” your codeâ€™s airtight. âœ…"
echo ""
