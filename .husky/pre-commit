#!/usr/bin/env sh

# ğŸ¶âœ¨ Husky x Biome: Code Check Jamâ„¢ ğŸ§ğŸ§ª

set -e  # Exit on first error

echo ""
echo "ğŸ›ï¸ [husky] Booting beats, no bugs allowed..."
echo "ğŸ” [sys] Peeking under the OS cloud..."

# Check for pnpm
if ! command -v pnpm >/dev/null 2>&1; then
  echo "âŒ [error] 'pnpm' not found. Please install it before committing."
  exit 1
fi

echo "ğŸ§ [track] Entering client directory to drop some lines..."
cd client || {
  echo "âŒ [error] Failed to cd into 'client' directory."
  exit 1
}

echo "ğŸ§ª [lint] Spinning up Biome to check for crimes..."
pnpm biome lint --write ./src

echo "âœ… [clean] Syntax is crisp â€” no broken rhymes ğŸ› ï¸"

echo "ğŸ¨ [style] Giving files a formatting spell..."
pnpm biome format --write ./src

echo "âœ¨ [fresh] Code is sharp â€” looking fly as well ğŸ§¥"

echo ""
echo "ğŸš€ [husky] Mic drop: pre-commit track is tight."
echo "ğŸ¤ [done] Push with pride â€” your codeâ€™s airtight. âœ…"
echo ""
