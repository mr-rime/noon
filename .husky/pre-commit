#!/usr/bin/env sh

# 🎶✨ Husky x Biome: Code Check Jam™ 🎧🧪

echo ""
echo "🎛️ [husky] Booting beats, no bugs allowed..."
echo "🔎 [sys] Peeking under the OS cloud..."

IS_LINUX=false

case "$(uname -s)" in
  Linux*)     IS_LINUX=true ;;
  *)          IS_LINUX=false ;;
esac

if [ "$IS_LINUX" = true ]; then
  RUN="sudo pnpm"
  echo "🐧 [env] Linux power — root on the hour ⏱️"
else
  RUN="pnpm"
  echo "🍎 [env] Mac or Windows — smooth like wind flows 💨"
fi

echo ""
echo "🎧 [track] Entering client directory to drop some lines..."
cd client || exit 1

echo "🧪 [lint] Spinning up biome to check for crimes..."
$RUN biome lint --write ./src || exit 1
echo "✅ [clean] Syntax is crisp — no broken rhymes 🛠️"

echo ""
echo "🎨 [style] Giving files a formatting spell..."
$RUN biome format --write ./src || exit 1
echo "✨ [fresh] Code is sharp — looking fly as well 🧥"

echo ""
echo "🚀 [husky] Mic drop: pre-commit track is tight."
echo "🎤 [done] Push with pride — your code’s airtight. ✅"
echo ""
